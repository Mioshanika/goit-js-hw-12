{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function requestImages({ query, page, perPage }) {\n  const axiosConfig = {\n    baseURL: 'https://pixabay.com/api/',\n    params: {\n      key: '48827874-cd9b9c73a8babeb73b5d7fdc9',\n      q: `${query}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: `${page}`,\n      per_page: `${perPage}`,\n    },\n  };\n  const pixabayAxios = new axios.create(axiosConfig);\n  return await pixabayAxios.get('');\n}\n","function imageTemplate(img) {\n  const {\n    webformatURL,\n    largeImageURL,\n    likes,\n    views,\n    comments,\n    downloads,\n    tags,\n  } = img;\n  const uniqueTags = new Set(tags.split(', '));\n  const altAttr = Array.from(uniqueTags.values()).join(', ');\n  return `<li>\n            <a href=\"${largeImageURL}\">\n              <img src=\"${webformatURL}\" alt=\"Tags: ${altAttr}\" />\n            </a>\n            <table class=\"photo-info\">\n              <tr>\n                <th>Likes</td>\n                <th>Views</td>\n                <th>Comments</td>\n                <th>Downloads</td>\n              </tr>\n              <tr>\n                <td>${likes}</td>\n                <td>${views}</td>\n                <td>${comments}</td>\n                <td>${downloads}</td>\n              </tr>\n            </table>\n          </li>`;\n}\nexport function imagesTemplate(imgs) {\n  return imgs.map(imageTemplate).join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightBox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { requestImages } from './js/pixabay-api';\nimport { imagesTemplate } from './js/render-functions';\n\nconst refs = {\n  queryForm: document.querySelector('[data-image-query]'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  loadmoreBtn: document.querySelector('.load-more-btn'),\n  endMsg: document.querySelector('.end-msg'),\n};\nconst optionsLightBox = {\n  close: false,\n  showCounter: false,\n  captionDelay: 250,\n  captionsData: 'alt',\n  scrollZoom: 'false',\n  scrollZoomFactor: 'false',\n  disableScroll: 'true',\n};\nconst queryParams = {\n  query: '',\n  page: 1,\n  perPage: 40,\n  lastPage: 1,\n};\nfunction showORhideLoadmoreBtn() {\n  if (queryParams.page < queryParams.lastPage) {\n    refs.loadmoreBtn.classList.remove('hidden');\n  } else {\n    refs.loadmoreBtn.classList.add('hidden');\n    refs.endMsg.classList.remove('hidden');\n  }\n}\nfunction scrollPage() {\n  const info = refs.gallery.firstElementChild.getBoundingClientRect();\n  scrollBy({\n    behavior: 'smooth',\n    top: info.height * 2,\n  });\n}\nconst submitHandler = async event => {\n  event.preventDefault();\n  refs.gallery.innerHTML = '';\n  refs.loadmoreBtn.classList.add('hidden');\n  refs.endMsg.classList.add('hidden');\n  queryParams.query = event.target.elements.query.value.trim();\n  if (!queryParams.query) {\n    refs.loadmoreBtn.classList.add('hidden');\n    iziToast.warning({\n      message: 'Query field is empty. Please enter your query!',\n      position: 'center',\n    });\n    return;\n  }\n  refs.loader.classList.remove('hidden');\n  queryParams.page = 1;\n  try {\n    const response = await requestImages(queryParams);\n    refs.loader.classList.add('hidden');\n    if (response.data.hits.length) {\n      refs.gallery.innerHTML = imagesTemplate(response.data.hits);\n      galleryLightBox.refresh();\n      queryParams.lastPage = Math.ceil(\n        response.data.totalHits / queryParams.perPage\n      );\n      showORhideLoadmoreBtn();\n    } else {\n      iziToast.info({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'center',\n      });\n    }\n  } catch (error) {\n    refs.loader.classList.add('hidden');\n    iziToast.error({\n      message: `${error.message}`,\n      position: 'center',\n    });\n  }\n};\nconst loadmoreHandler = async () => {\n  refs.loader.classList.remove('hidden');\n  scrollBy({\n    behavior: 'smooth',\n    top: 44,\n  });\n  queryParams.page += 1;\n  try {\n    const response = await requestImages(queryParams);\n    refs.loader.classList.add('hidden');\n    refs.gallery.insertAdjacentHTML(\n      'beforeend',\n      imagesTemplate(response.data.hits)\n    );\n    galleryLightBox.refresh();\n    scrollPage();\n    showORhideLoadmoreBtn();\n  } catch (error) {\n    refs.loader.classList.add('hidden');\n    refs.loadmoreBtn.classList.add('hidden');\n    refs.endMsg.classList.add('hidden');\n    iziToast.error({\n      message: `${error.message}`,\n      position: 'center',\n    });\n  }\n};\n\nconst galleryLightBox = new simpleLightBox('.gallery a', optionsLightBox);\nrefs.queryForm.addEventListener('submit', submitHandler);\nrefs.loadmoreBtn.addEventListener('click', loadmoreHandler);\n"],"names":["requestImages","query","page","perPage","axiosConfig","axios","imageTemplate","img","webformatURL","largeImageURL","likes","views","comments","downloads","tags","uniqueTags","altAttr","imagesTemplate","imgs","refs","optionsLightBox","queryParams","showORhideLoadmoreBtn","scrollPage","info","submitHandler","event","iziToast","response","galleryLightBox","error","loadmoreHandler","simpleLightBox"],"mappings":"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"}